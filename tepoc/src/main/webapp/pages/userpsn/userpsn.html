<div class="u-mdlayout" id="user-mdlayout">
	<div class="u-mdlayout-btn u-row">
		<div class="btnBox pull-left mb-5">
			<button class="u-button raised primary" id="table-add" data-bind="click: event.addClick">
				<i class="icon uf uf-plus">新建</i>
			</button>
			<button class="u-button raised primary" id="table-edit" data-bind="click: event.editClick">
				<i class="icon uf uf-pencil-s">编辑</i>
			</button>
			<button class="u-button raised primary" id="table-edit" data-bind="click: event.showClick">
				<i class="icon uf uf-pencil-s">查阅</i>
			</button>
			<button class="u-button raised primary" id="table-del" data-bind="click: event.delRow">
				<i class="icon uf uf-close-bold">删除</i>
			</button>
			<!-- <button class="u-button raised primary" id="table-finish" data-bind="click: finishClick,visible: finishFunShow">完结</button> -->
			<!-- <button class="u-button raised primary" id="table-unfinish" data-bind="click: unFinishClick,visible: unFinishFunShow">撤销完结</button> -->
			<button class="u-button raised primary" id="table-unfinish" data-bind="click: event.ex_export">
				<i class="icon uf uf-files-o">导出</i>
			</button>
			<!-- <button class="u-button raised primary" id="table-unfinish" data-bind="click: event.onDownload">
			返回
			</button> -->
		</div>
		<!-- <div id="user_list_button_2" class="u-col-4 user-actions user_list_button_2 ">
		<div class=" u-button-group margin-0 padding-0">
		<button class="u-button u-button-primary u-button-sm " data-bind="click: event.addClick">
		增加
		</button>
		<button class="u-button u-button-primary u-button-sm " data-bind="click: event.editClick">
		编辑
		</button>
		<button class="u-button u-button-primary u-button-sm " data-bind="click: event.delRow">
		删除
		</button>
		</div>
		</div> -->
	</div>
	<div class="u-mdlayout-btn u-row hide ">
		<div id="user_card_button">
			<div class="u-col-4  ufBack padding-bottom-5" data-bind="click:event.goBack">
				<a><i class="uf uf-aaleft"></i>返回</a>
			</div>
			<div class="u-col-4 padding-bottom-5 " style="text-align:center;">
				<span>人员信息</span>
			</div>
			<div class="u-col-4 padding-bottom-5">
				<button type="button" class=" u-button u-button-primary u-button-sm" style="float:right;" data-bind="click:event.saveClick">
					保存
				</button>
			</div>
		</div>
	</div>
	<div class="form-search" style="z-index:0;">
		<h5 data-bind="click:event.showSearchClick">查询条件</h5>
		<div class="search-section" id="showSearch">
			<div class="u-row">
				<div class="u-col-6 u-col-sm-12">
					<div class="u-col-2 u-col-sm-4" style="text-align: right; height: 100%;padding: 5px;">
						<label>用户名</label>
					</div>
					<div class="u-col-4 u-col-sm-8 ">
						<input type="text" class="u-form-control u-input-write" u-meta='{"id":"search_name","name":"用户名","type":"string","data":"searchData","field":"search_name"}'>
					</div>
					<div class="u-col-2 u-col-sm-4" style="text-align: right; height: 100%;padding: 5px;">
						<label>性别</label>
					</div>
					<div class="u-col-4 u-col-sm-8 ">
						<div id="combo1" class="u-combo" u-meta='{"id":"search_sex","name":"性别","type":"u-combobox","data":"searchData","field":"search_sex","datasource":"comboData"}'>
							<div class="u-input-group u-has-feedback">
								<input class="u-form-control" />
								<span class="u-form-control-feedback uf uf-arrow-down" data-role="combo-button"></span>
							</div>
						</div>
					</div>

				</div>
				<div class="u-col-6 u-col-sm-12">
					<div class="u-col-2 u-col-sm-4" style="text-align: right; height: 100%;padding: 5px;">
						<label>专业</label>
					</div>
					<div class="u-col-4 u-col-sm-8 ">
						<div id="combo1" class="u-combo" u-meta='{"id":"search_profession","name":"专业","type":"u-combobox","data":"searchData","field":"search_profession","datasource":"comboDataMajor"}'>
							<div class="u-input-group u-has-feedback">
								<input class="u-form-control" />
								<span class="u-form-control-feedback uf uf-arrow-down" data-role="combo-button"></span>
							</div>
						</div>
					</div>
					<div class="u-col-2 u-col-sm-4" style="text-align: right; height: 100%;padding: 5px;">
						<label>入职时间</label>
					</div>
					<div class="u-col-4 u-col-sm-8 ">
						<div class="u-datepicke input-group fx-datepicker" u-meta='{"id":"search_entry_start","name":"入职时间","data":"searchData","field":"search_entry_start","type":"u-date","format":"YYYY-MM-DD"}'>
							<input type="text" class="u-form-control" />
							<span class="input-group-addon"> <span class="glyphicon glyphicon-calendar"></span> </span>
						</div>
					</div>
				</div>
			</div>
			<div class="u-row">
				<div class="u-col-3 u-col-sm-12 pull-right">
					<div class=" padding-top-2 ">
						<button class="u-button u-button-primary raised gray-btn u-button-pa margin-right-20" id="user-action-search" data-bind="click: event.search">
							查询
						</button>
						<button class="u-button u-button-primary  raised gray-btn u-button-pa " id="user-action-cleanSearch" data-bind="click: event.cleanSearch">
							清空
						</button>
					</div>
				</div>
			</div>

		</div>
	</div>

	<div class="u-mdlayout-detail">
		<!-- list -->
		<div class="u-mdlayout-page u-navlayout-fixed-header current" id="list">
			<div class="u-mdlayout-page-section">
				<div class="user-datagrid" style="">
					<div class="table-container">
						<table class="u-table" style="width:100%">
							<thead>
								<tr>
									<th name="userCheckbox" style="display: block;border-top:1px solid transparent;"><label class="margin-top-5 u-checkbox only-style u-checkbox-floatl" data-bind="click: UserPsnDa.toggleAllSelect.bind(UserPsnDa), css:{'is-checked': UserPsnDa.allSelected()}">
										<input id="checkInput" type="checkbox" class="u-checkbox-input">
										<span class="u-checkbox-label"></span> </label></th>
									<th>用户名</th>
									<th>性别</th>
									<!-- <th>身份证</th> -->
									<th>出生日期</th>
									<th>邮箱</th>
									<th>手机</th>
									<th>学历</th>
									<th>专业</th>
									<th>入职时间</th>
									<th>所属公司</th>
									<th>部门</th>
									<!-- <th>照片</th> -->
								</tr>
							</thead>
							<tbody data-bind="foreach:{data:UserPsnDa.rows(),as:'row', afterAdd: event.afterAdd}">
								<tr data-bind="css: { 'is-selected' : row.selected() } ,attr:{'rowindex': $index()}, click: $parent.event.rowClick">
									<td name="userCheckbox" class="checkbox1"><label class="u-checkbox only-style u-checkbox-floatl" data-bind="click: row.multiSelect, css:{'is-checked': row.selected()}">
										<input type="checkbox" class="u-checkbox-input">
										<span class="u-checkbox-label"></span> </label></td>
									<td data-bind="text: row.ref('username')"></td>
									<td data-bind="text: $parent.event.changeUserPsnsex(row.ref('sex'))"></td>
									<!-- <td data-bind="text: row.ref('sex')"></td> -->
									<!-- <td data-bind="text: row.ref('idcard')"></td> -->
									<td data-bind="text: row.ref('brithdate')"></td>
									<td data-bind="text: row.ref('email')"></td>
									<td data-bind="text: row.ref('telphone')"></td>
									<!-- <td data-bind="text: row.ref('edution')"></td> -->
									<td data-bind="text: $parent.event.changeUseEdu(row.ref('edution'))"></td>
									<td data-bind="text: $parent.event.changeUseMajor(row.ref('major'))"></td>
									<!-- <td data-bind="text: row.ref('major')"></td> -->
									<td data-bind="text: row.ref('work_date')"></td>
									<td data-bind="text: row.ref('pk_corp_name')"></td>
									<td data-bind="text: row.ref('pk_dept_name')"></td>
									<!-- <td data-bind="text: row.ref('photo')"></td> -->
								</tr>
							</tbody>
						</table>
					</div>
					<div id='pagination' class='u-pagination pagination-sm '></div>
				</div>
				<div class="user-datagrid " style="padding:15px 0px 15px 0px;">
					<!-- <div class="table-container">
					<table class="u-table" style="width:100%">
					<thead>
					<tr>
					<th>角色编码</th>
					<th>角色名称</th>
					<th>角色类型</th>
					</tr>
					</thead>
					<tbody data-bind="foreach:{data:UserRoleDa.rows(),as:'row'}">
					<tr data-bind="css: { 'is-selected' : row.selected() } ,attr:{'rowindex': $index()}, click: $parent.event.selectUserJob">
					<td data-bind="text: row.ref('rolecode')"></td>
					<td data-bind="text: row.ref('rolename')"></td>
					<td data-bind="text: row.ref('roletype')"></td>
					</tr>
					</tbody>
					</table>
					</div> -->
					<!-- <div style="display:none" id='child_list_pagination' class='u-pagination pagination-sm '></div> -->
				</div>
			</div>
		</div>
		<!-- end list -->
		<!-- addPage -->
		<div class="u-mdlayout-page" id="addPage">
			<div class="u-mdlayout-page-section" id="user-form">
				<!-- BEGIN FORM-->
				<div class="u-row border">
					<div class="u-col-10 u-col-sm-12">
						【张三】于2017年3月27日14点05分新建【用户管理】单据
					</div>
					<div class="u-col-2 u-col-sm-12">
						<a href="#busilog/busilog" class="u-button primary"> 日志 </a>
						<button class="u-button primary">
							传阅
						</button>
					</div>
				</div>
				<div class="u-container-fluid">
					<div class="search-content">
						<div class="image-box">
							<img src="../../static/a0.jpg" />
							<div class="upload-btn">
								<button class="u-button u-button-primary" data-bind="click:event.onOpenInfoUploadWin">
									上传照片
								</button>
							</div>

						</div>
						<div class="u-row">
							<div class="u-col-md-4">
								<div class="u-form-group">
									<label>用户名</label>

									<div class="u-input-group u-has-feedback" u-meta='{"type":"u-text","data":"UserPsnFormDa","field":"username"}'>
										<input type="text" class="u-form-control" placeholder="">
									</div>
								</div>
							</div>
							<div class="u-col-md-4">
								<div class="u-form-group">
									<label>性别</label>

									<div class="u-combo" u-meta='{"type":"u-combobox","datasource":"comboData","data":"UserPsnFormDa","field":"sex","onlySelect":true}'>
										<div class="u-input-group u-has-feedback">
											<div class="u-input-group-before" style="color: red;">
												*
											</div>
											<span class="u-form-control-feedback fa fa-angle-down" data-role="combo-button"></span>
											<input class="u-form-control" readonly/>
										</div>
									</div>
								</div>
							</div>
							<div class="u-col-md-4">
								<div class="u-form-group">
									<label>身份证</label>

									<div class="u-input-group u-has-feedback" u-meta='{"type":"u-text","data":"UserPsnFormDa","field":"idcard","validType":"idcard"}'>
										<input type="text" class="u-form-control" placeholder="">
									</div>
								</div>
							</div>
							<div class="u-col-md-4">
								<div class="u-form-group">
									<label>出生日期</label>

									<div class="u-input-group u-has-feedback" u-meta='{"type":"u-date","data":"UserPsnFormDa","field":"brithdate"}'>
										<input type="text" class="u-form-control" placeholder="">
									</div>
								</div>
							</div>
							<div class="u-col-md-4">
								<div class="u-form-group">
									<label>邮箱</label>

									<div class="u-input-group u-has-feedback" u-meta='{"type":"u-text","data":"UserPsnFormDa","field":"email","validType":"email"}'>
										<input type="text" class="u-form-control" placeholder="">
									</div>
								</div>
							</div>
							<div class="u-col-md-4">
								<div class="u-form-group">
									<label>手机</label>

									<div class="u-input-group u-has-feedback" u-meta='{"type":"phoneNumber","data":"UserPsnFormDa","field":"telphone"}'>
										<input type="text" class="u-form-control" placeholder="">
									</div>
								</div>
							</div>
							<div class="u-col-md-4">
								<div class="u-form-group">
									<label>学历</label>
									<div id="combo1" class="u-combo" u-meta='{"name":"学历","type":"u-combobox","data":"UserPsnFormDa","field":"edution","datasource":"comboDataEdution"}'>
										<div class="u-input-group u-has-feedback">
											<input class="u-form-control" />
											<span class="u-form-control-feedback uf uf-arrow-down" data-role="combo-button"></span>
										</div>
									</div>
								</div>
							</div>
							<div class="u-col-md-4">
								<div class="u-form-group">
									<label>专业</label>
									<div id="combo1" class="u-combo" u-meta='{"name":"专业","type":"u-combobox","data":"UserPsnFormDa","field":"major","datasource":"comboDataMajor"}'>
										<div class="u-input-group u-has-feedback">
											<input class="u-form-control" />
											<span class="u-form-control-feedback uf uf-arrow-down" data-role="combo-button"></span>
										</div>
									</div>
								</div>
							</div>
							<div class="u-col-md-4">
								<div class="u-form-group">
									<label>入职时间</label>

									<div class="u-input-group u-has-feedback" u-meta='{"type":"u-date","data":"UserPsnFormDa","field":"work_date"}'>
										<input type="text" class="u-form-control" placeholder="">
									</div>
								</div>
							</div>
							<div class="u-col-md-4">
								<div class="u-form-group">
									<label>所属公司</label>
									<!--  lyk备注：参照换成新的uiref的方式 -->


									<div id="corpref" class="input-group" u-meta='{"refCode":"corpref","name":"所属公司","type":"uiRefer", "data":"UserPsnFormDa", "field":"pk_corp_name"}'>
										<div class="u-input-group u-has-feedback">
											<input class="u-form-control" />
											<span class="u-form-control-feedback fa fa-search refer" data-role="combo-button"></span>
										</div>
									</div>
									<!-- <input id="corpref" type="text" u-meta='{"refCode":"corpref","type":"uiRefer", "data":"UserPsnFormDa", "field":"pk_corp_name"}' style="display:none;"> -->
									<!-- <div class="u-combo"
									u-meta='{"type":"u-text","data":"UserPsnFormDa","field":"pk_corp_name","onlySelect":true}'>
									<div class="u-input-group u-has-feedback">
									<span class="u-form-control-feedback fa fa-list-ul"
									data-bind="click:event.selectOrg_UserPsn"></span>
									<input class="u-form-control" readonly="readonly"/>
									</div>
									</div> -->
								</div>
							</div>
							<div class="u-col-md-4">
								<div class="u-form-group">
									<label>部门</label>
									<!-- lyk备注：参照换成新的uiref的方式 -->
									<div id="deptref" class="input-group" u-meta='{"refCode":"deptref","name":"所属公司","type":"uiRefer", "data":"UserPsnFormDa", "field":"pk_corp_name"}'>
										<div class="u-input-group u-has-feedback">
											<input class="u-form-control" />
											<span class="u-form-control-feedback fa fa-search refer" data-role="combo-button"></span>
										</div>
									</div>
									<!-- <div class="u-combo" u-meta='{"type":"u-text","data":"UserPsnFormDa","field":"pk_dept_name","onlySelect":true}'>
									<div class="u-input-group u-has-feedback">
									<span class="u-form-control-feedback fa fa-list-ul" data-bind="click:event.selectDept_UserPsn"></span>
									<input class="u-form-control" readonly="readonly" />
									</div>
									</div> -->
								</div>
							</div>
							<!-- <div class="u-col-md-4">
							<div class="u-form-group">
							<label>照片</label>

							<div class="u-input-group u-has-feedback"
							u-meta='{"type":"u-text","data":"UserPsnFormDa","field":"photo"}'>
							<input type="text" class="u-form-control" placeholder="">
							</div>
							</div>
							</div> -->
						</div>
					</div>
					<div class="u-tabs u-tab-inner-left">
						<div class="u-tabs__tab-bar">
							<a href="#tab-panel-1" class="u-tabs__tab is-active">所属角色</a>
							<a href="#tab-panel-2" class="u-tabs__tab" id="tab_dept">管辖部门</a>
							<a href="#tab-panel-add_file" class="u-tabs__tab" id="tab_file">活动照片</a>
						</div>
						<div class="u-tabs__panel is-active" id="tab-panel-1" style="float:clear;">
							<div class="u-widget mtb-1015" style="background-color:transparent;margin: 10px 0 10px 0;">
								<button class="u-button u-button-primary u-button-pa" id="UserRole-action-addUserJob" data-bind="click: event.addUserRole">
									新建
								</button>
								<div style="display: none;">
									<div id="rolerefadd" class="input-group" u-meta='{"refCode":"roleref","name":"所属角色","type":"uiRefer", "data":"addRefDa", "field":"role"}'>
										<input id="testRefMuGridTree2"  class="u-form-control u-input" type="text" data-bind="enable: true">
										<span class="u-form-control-feedback fa fa-search refer" data-bind="enable: true"></span>
									</div>
								</div>
								<button class="u-button u-button-primary u-button-pa" id="UserRole-action-delUserJob" data-bind="click: event.delUserJob">
									删除
								</button>
							</div>
							<div class="u-row">
								<div id="UserRole-form">
									<div class="table-container clearfix">
										<div type="text" id="gridUserJob" u-meta='{"id":"role_grid","type":"grid","data":"UserRoleFormDa","columnMenu":false,"canDrag":false,"sortable":false,"canSwap":false,"editable":false,"editType":"default","showNumCol":true}'>
											<div options='{"field":"rolecode","dataType":"String","title":"角色编码","editType":"string"}'></div>
											<div options='{"field":"rolename","dataType":"String","title":"角色名称","editType":"string"}'></div>
											<div options='{"field":"roletype","dataType":"String","title":"角色类型","editType":"string"}'></div>
										</div>
										<div style="" id='child_card_pagination' class='u-pagination pagination-sm '></div>
									</div>
								</div>
							</div>
						</div>

						<div class="u-tabs__panel" id="tab-panel-2">
							<div class="u-widget mtb-1015" style="background-color:transparent;margin: 10px 0 10px 0;">
								<button class="u-button u-button-primary u-button-pa" id="UserRole-action-addUserDept" data-bind="click: event.addUserDept">
									新建
								</button>
								<div style="display: none;">
									<div id="deptAddRef" class="input-group" u-meta='{"refCode":"deptref","name":"所属角色","type":"uiRefer", "data":"addRefDa", "field":"dept"}'>
										<input id="testRefMuGridTree21"  class="u-form-control u-input" type="text" data-bind="enable: true">
										<span class="u-form-control-feedback fa fa-search refer" data-bind="enable: true"></span>
									</div>
								</div>

								<button class="u-button u-button-primary u-button-pa" id="UserRole-action-editUseDept" data-bind="click: event.editUserDept">
									编辑
								</button>
								<div style="display: none;">
									<div id="deptAddRef1" class="input-group" u-meta='{"refCode":"deptref","name":"所属角色","type":"uiRefer", "data":"addRefDa", "field":"deptedit"}'>
										<input id="testRefMuGridTree212"  class="u-form-control u-input" type="text" data-bind="enable: true">
										<span class="u-form-control-feedback fa fa-search refer" data-bind="enable: true"></span>
									</div>
								</div>
								<button class="u-button u-button-primary u-button-pa" id="UserRole-action-delUserDept" data-bind="click: event.delUserDept">
									删除
								</button>
							</div>
							<div class="u-row">
								<div id="UserRole-form">
									<div class="table-container clearfix">
										<div type="text" id="gridUserJob" u-meta='{"id":"dept_grid","type":"grid","data":"UserDeptFormDa","columnMenu":false,"canDrag":false,"sortable":false,"canSwap":false,"editable":false,"editType":"default","showNumCol":true}'>
											<div options='{"field":"deptcode","dataType":"String","title":"部门编码","editType":"string"}'></div>
											<div options='{"field":"deptname","dataType":"String","title":"部门名称","editType":"string"}'></div>
										</div>
										<div style="" id='child_dept_card_pagination' class='u-pagination pagination-sm '></div>
									</div>
								</div>
							</div>
						</div>
						<div class="u-tabs__panel" id="tab-panel-add_file">
							<div class="u-widget mtb-1015" style="background-color:transparent;margin: 10px 0 10px 0;">
								<button class="u-button u-button-primary u-button-pa" name="addfile" data-bind="click: event.onOpenUploadWin">
									增加
								</button>
								<button class="u-button u-button-primary u-button-pa" name="editfile" data-bind="click: event.onOpenUploadWin">
									编辑
								</button>
								<button class="u-button u-button-primary u-button-pa" id="UserRole-action-delUserJob" data-bind="click: event.fileDelete">
									删除
								</button>
							</div>
							<div class="u-row" data-bind="foreach:{data:UserFileFormDa.rows(),as:'row'}">
								<div class="u-col-2">
									<label class="u-radio" data-bind="attr:{'for': 'option-' +$index()},click:$parent.event.fileselect">
										<input type="radio" data-bind="attr:{'id': 'option-' +$index(),'value':row.ref('id')}" class="u-radio-button" name="options" >
										<img data-bind="attr:{src: imgsrc_tans(row.ref('url')())}" /> <span class="u-radio-label" data-bind="text: row.ref('filename')"></span></label>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
			<!-- END FORM-->
		</div>
		<!-- end addPage -->
		<!-- editPage -->
		<!-- end editPage -->
		<!-- showPage -->
		<div class="u-mdlayout-page" id="showPage">
			<div class="u-mdlayout-page-section">
				<div class="u-col-md-12" style="margin:10px 5px 1px 20px;">
					<div class="u-widget">
						<button type="button" class="u-button u-button-primary u-button-pa" data-bind="click:event.goBack">
							返回
						</button>
					</div>
				</div>
				<!-- BEGIN FORM-->
				<form action="#" class="form-horizontal" id="user-view-form"></form>
			</div>
			<!-- END FORM-->
		</div>
		<!-- end showPage -->

	</div>
</div>
<div id="countrysubsid_dialog_uploadfileinfo" style="display: none;">
	<div class="u-msg-title">
		<h4>个人照片上传</h4>
	</div>
	<div class="u-msg-content">
		<div class="u-row">
			<div class="u-col-12" style="margin-bottom: 20px;">
				<div class="u-widget">
					<div class="menu">
						<button class="u-button raised primary sub-list1-new" data-bind="click:event.onInfoFileUpload" data-upgraded=",u.Button" style="display: inline-block;">
							上传<span class="u-button-container"><span class="u-ripple is-animating" style="width: 158px; height: 158px; transform: translate(-50%, -50%) translate(48px, 13px);"></span></span>
						</button>

					</div>
				</div>
			</div>
		</div>
		<div class="u-row">
			<div class="u-col-12">
				<div class="u-widget">
					<div class="form">
						<div class="u-col-3 u-col-xs-4 u-col-sm-4 u-col-md-3" style=" width: 330px; padding-left: 0px; ">
							<div class="u-text u-label-floating-always is-upgraded" data-upgraded=",u.Text">
								<input class="u-input" type="file" name="addfile" id="infofile_id" multiple="multiple">
								<label class="u-label" for="sample1" style="display:none;">选择附件</label>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div id="countrysubsid_dialog_uploadfile" style="display: none;">
	<div class="u-msg-title">
		<h4>附件上传</h4>
	</div>
	<div class="u-msg-content">
		<div class="u-row">
			<div class="u-col-12" style="margin-bottom: 20px;">
				<div class="u-widget">
					<div class="menu">
						<button class="u-button raised primary sub-list2-new" data-bind="click:event.onFileUpload" data-upgraded=",u.Button" style="display: inline-block;">
							上传<span class="u-button-container"><span class="u-ripple is-animating" style="width: 158px; height: 158px; transform: translate(-50%, -50%) translate(48px, 13px);"></span></span>
						</button>

					</div>
				</div>
			</div>
		</div>
		<div class="u-row">
			<div class="u-col-12">
				<div class="u-widget">
					<div class="form">
						<div class="u-col-3 u-col-xs-4 u-col-sm-4 u-col-md-3" style=" width: 330px; padding-left: 0px; ">
							<div class="u-text u-label-floating-always is-upgraded" data-upgraded=",u.Text">
								<input class="u-input" type="file" name="addfile" id="countrysubsidybatch_id" multiple="multiple">
								<label class="u-label" for="sample1" style="display:none;">选择附件</label>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
